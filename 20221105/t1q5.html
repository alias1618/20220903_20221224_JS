<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="jquery-3.6.1.min.js"></script>
</head>

<body>
    <!--正中央-->
    <script>
        // $.getJSON('db.json', function (myData) {
        //     //console.log('done');
        //     console.log(myData);
        // })

    // var lin = new Array();
    // var now = 0;
    // if (lin.length > 1) {
    //   setInterval("ww()", 3000);
    //   now = 1;
    // }
    // function ww() {
    //   $("#mwww").html("<embed loop=true src='" + lin[now] + "' style='width:99%; height:100%;'></embed>")
    //   //$("#mwww").attr("src",lin[now])
    //   now++;
    //   if (now >= lin.length)
    //     now = 0;
    // }
    </script>
    <div style="width:100%; padding:2px; height:290px;">
        <div id="mwww" loop="true" style="width:100%; height:100%;">
            <div style="width:99%; height:100%; position:relative;" class="cent">沒有資料</div>
        </div>
    </div>
    <script>
        //非同步存取，當迴船之後可以順利繼續執行預計的作業
        $.getJSON('db.json', function (res) {
            //console.log('done');
            //console.log(myData);
            //todo(res.q1t5);
            toBetter(res.q1t5);
        })

        function toBetter(imgAry) {
            if(imgAry.length){
                console.log(imgAry.length);
                $("#mwww").html("<embed loop=true src='" + imgAry[0] + "' style='width:99%; height:100%;'></embed>");

                //超過1張做輪撥
                if(imgAry.length > 1){
                    let nowat = 1;
                    setInterval(function () {
                        $('#mwww>embed').attr('src', imgAry[nowat]);
                        nowat = (nowat + 1) % imgAry.length;
                        console.log(nowat);
                        //三元運算子
                        //nowat = nowat == 5 ? 0 : nowat + 1;
                    },3000);
                }
            }
        }

        function todo(lin) {
            // console.log(mydata);
            // var lin = new Array();//圖片陣列
            // lin = mydata;
            var now = 0;    //索引0 
            $("#mwww").html("<embed loop=true src='" + lin[now] + "' style='width:99%; height:100%;'></embed>");

            if (lin.length > 1) {   //圖片超過1張
                setInterval(ww(), 3000);//不斷執行WW函式，每間格3秒
                now = 1;
            }
            function ww() {
                $("#mwww").html("<embed loop=true src='" + lin[now] + "' style='width:99%; height:100%;'></embed>");
                //$("#mwww").attr("src",lin[now])
                now++;
                if (now >= lin.length)
                    now = 0;
            }
        }
    </script>
</body>

</html>